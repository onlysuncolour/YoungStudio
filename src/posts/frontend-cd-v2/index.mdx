---
title: "前端 continusly deploy 的实现 v2"
date: "2025-03-13"
spoiler: "ing"
---

## 前言

在之前的一篇文中，写了 前端continusly deploy的实现，当然，后面又改了很多交互，觉得还是有必要再记录一下。

当然，这次主要是记录自己设计的整个产品流程。

## 流水线的编排

在这里，为用户设计了两种行为：构建，部署

### 构建
* 用户可以添加多个构建流程
* 用户需要在构建流程中，填写相应的参数
  1. gitlab project id
  2. branch(editable)
  3. imageName
  4. imageTag(editable)
    在这里选择 固定版本号、随机字符串、递增版本号、可以在发起任务时修改版本号
  5. dockerfilePath
  6. docker build args

### 部署
* 用户可以添加多个部署流程
* 部署方式可以选择 dockerRun 或 helm
* 镜像/版本，可以选择构建流程中的产物，也可以用户手动输入/发起任务时输入
* 用户也需要填入相应参数/在新建任务时填入
  1. 部署的server
  2. 容器名称(在服务器上唯一)
  3. 构建参数

## 部署任务

用户可以基于流水线创建任务。  
创建任务时，可以对流水线的部分参数进行编辑，比如 构建的 branch、imageName、imageTag，部署的server 等

在部署任务中，用户可以看到该条任务所有的部署记录，及其日志、参数，并可以进行回滚操作。

用户可以在这里发起部署任务，实时查看当前的部署log。

## 总结

这次的设计，主要是为了满足自己对产品的一些想法。  
这次的产品设计，才真的像一个流水线，可以满足用户对构建、部署的多种需求。

