---
title: "解数独"
date: "2025-08-18"
spoiler: "37 困难"
---

[leetcode-解数独](https://leetcode.cn/problems/sudoku-solver/description/)

## 题目描述

```text
编写一个程序，通过填充空格来解决数独问题。

数独的解法需 遵循如下规则：

数字 1-9 在每一行只能出现一次。
数字 1-9 在每一列只能出现一次。
数字 1-9 在每一个以粗实线分隔的 3x3 宫内只能出现一次。（请参考示例图）
数独部分空格内已填入了数字，空白格用 '.' 表示。

示例 ：
输入：board = [["5","3",".",".","7",".",".",".","."],["6",".",".","1","9","5",".",".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".",".","3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],[".",".",".",".","8",".",".","7","9"]]
输出：[["5","3","4","6","7","8","9","1","2"],["6","7","2","1","9","5","3","4","8"],["1","9","8","3","4","2","5","6","7"],["8","5","9","7","6","1","4","2","3"],["4","2","6","8","5","3","7","9","1"],["7","1","3","9","2","4","8","5","6"],["9","6","1","5","3","7","2","8","4"],["2","8","7","4","1","9","6","3","5"],["3","4","5","2","8","6","1","7","9"]]

```

## 本人题解

```Javascript
/**
 * @param {character[][]} board
 * @return {void} Do not return anything, modify board in-place instead.
 */
var solveSudoku = function(board) {
  const nextCell = getNextCell(board);
  if (!nextCell.length) {
    return;
  }
  solve(board, ...nextCell);
  console.log(board);
  return;
};

function solve(board, x, y) {
  if (x === undefined || y === undefined) {
    return true;
  }
  const availableNumbers = getAvailableNumbers(board, x, y);
  const nextCell = getNextCell(board, x, y+1);
  if (availableNumbers.size === 0) {
    return false
  }
  for (const number of availableNumbers) {
    board[x][y] = number;
    if (solve(board, ...nextCell)) {
      return true
    }
  }
  board[x][y] = '.';
  return false;
}

function getNextCell(board, x = 0, y = 0) {
  for (let i = x; i < 9; i++) {
    for (let j = y; j < 9; j++) {
      if (board[i][j] === '.') {
        return [i, j];
      }
    }
    y = 0;
  }
  return [];
}

function getAvailableNumbers(board, x, y) {
  const availableNumbers = new Set(["1", "2", "3", "4", "5", "6", "7", "8", "9"]);
  const row = board[x];
  const col = board.map(row => row[y]);
  const square = [];
  const squareX = Math.floor(x / 3);
  const squareY = Math.floor(y / 3);
  for (let i = 0; i < 3; i++) {
    for (let j = 0; j < 3; j++) {
      square.push(board[squareX * 3 + i][squareY * 3 + j]);
    }
  }
  const numbers = [...row, ...col, ...square];
  for (const number of numbers) {
    if (number !== '.')
    availableNumbers.delete(number);
  }
  return availableNumbers;
}
```

## 分析

1. 首先要找到下一个要填充的位置
2. 找到该位置的 横排 竖列 9宫格，从而找到它 available 的数字
3. 尝试每个可用的数字，并且在此基础上，重复 1 2 3
4. 如果没有可用的数字，则返回 false，并且回溯。如果每个可用的数字的结果都是false，将值还原为 .，继续回溯
5. 当下一个位置是空时，说明已经解决！